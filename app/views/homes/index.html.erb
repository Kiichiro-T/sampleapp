<!DOCTYPE html>
<html>
  <head>
    <title>AppName</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.min.js">
      </script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Ensures optimal rendering on mobile devices. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> <!-- Optimal Internet Explorer compatibility -->
  </head>
  <body>
    <% if user_signed_in? %>
      <h2> 現在 <%= current_user.name %> さんがログインしています </h2>
      <h4> メールアドレス： <%= current_user.email %> </h4>
      <p><%= link_to "イベント新規作成", new_event_path %></p>
      <p><%= link_to "イベント一覧", events_path %></p>
      <p><%= link_to "ログアウト", destroy_user_session_path, method: :delete %></p>

      <script
        src="https://www.paypal.com/sdk/js?client-id=AZR6iii5MSSwkNDYMHwXBAisU7U7EseHtRKIBE5gnxIflczZyT2Z9cZjpO1CXPNPb0aNub4lXCKQDE3Q&currency=JPY"> // Required. Replace SB_CLIENT_ID with your sandbox client ID.
      </script>

      <div id="paypal-button-container"></div>

      <script>
        paypal.Buttons({
          createOrder: function(data, actions) {
          // This function sets up the details of the transaction, including the amount and line item details.
            return actions.order.create({
              purchase_units: [{
                amount: {
                  value: '500'
                }
              }]
            });
          },
          onApprove: function(data, actions) {
            // This function captures the funds from the transaction.
            return actions.order.capture().then(function(details) {
            // This function shows a transaction success message to your buyer.
              alert('Transaction completed by ' + details.payer.name.given_name);
              return fetch('/paypal-transaction-complete', {
                method: 'post',
                headers: {
                  'content-type': 'application/json'
                },
                body: JSON.stringify({
                  orderID: data.orderID
                })
              });
            });
          }
        }).render('#paypal-button-container');
        //This function displays Smart Payment Buttons on your web page.
      </script>

    <% else %>
      <h2> 現在ログインしていません </h2>
      <%= link_to "ログイン", new_user_session_path, class: 'post' %>
      <%= link_to "新規登録", new_user_registration_path, class: 'post' %>
    <% end %>

    <div class="btn btn-primary">ボタン</div>
	
    <div class="line-it-button" data-lang="ja" data-type="share-a" data-ver="3" data-url="http://localhost:3000/" data-color="default" data-size="large" data-count="false" style="display: none;"></div>
    <script src="https://d.line-scdn.net/r/web/social-plugin/js/thirdparty/loader.min.js" async="async" defer="defer"></script>
  <body>